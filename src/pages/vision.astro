---
import Layout from '../layouts/Layout.astro';

import heroImage from '../assets/sol-cohousing-vision.jpg';
import cohousingImage from '../assets/sol-cohousing-vision-cohousing.jpg';
import tinyHomeImage from '../assets/sol-cohousing-vision-double-tiny.webp';
import interiorsImage from '../assets/sol-cohousing-vision-demo-model.webp';
---

<Layout title="Our Vision | Sol Village">
	<main class="page">
		<section class="hero">
			<div class="hero-copy">
				<p class="eyebrow">Our vision</p>
				<h1>Affordable Living That Connects Neighbors</h1>
				<p class="lede">
					Combining the tried-and-true model of cohousing with the affordability of modern tiny homes, we're pioneering a new model of affordable, sustainable housing that fosters genuine neighborly relationships in Nevada County.
				</p>
			</div>
			<figure class="hero-visual">
				<img
					src={heroImage.src}
					alt="Community members gathering in a shared outdoor space with beautiful landscaping"
					loading="eager"
					decoding="async"
				/>
			</figure>
		</section>

		<section class="cohousing-section">
			<div class="section-content">
				<div class="text-content">
					<h2>What is Co-Housing?</h2>
					<p class="section-tagline">Living together, better.</p>
					<p>
						Co-housing is a way of living that blends the independence of private homes with the 
						connection of shared community. Residents own private homes, but share access to common 
						spaces—like gardens, workshops, or gathering halls—designed to foster connection, 
						collaboration, and mutual support.
					</p>
					<p>
						In Nevada County, we're lucky to have two textbook co-housing developments: 
						<a href="https://nevadacitycohousing.org" target="_blank" rel="noopener">Nevada City Cohousing</a> 
						and Wolf Creek Lodge. If you're interested in what co-housing looks like in practice, 
						consider touring one of these developments or checking out "Creating Cohousing" from your 
						local library.
					</p>
				</div>
				<figure class="section-image">
					<img src={cohousingImage.src} alt="Modern co-housing community with shared outdoor spaces and private homes" />
				</figure>
			</div>
		</section>

		<section class="tiny-homes-section">
			<div class="section-content">
				<figure class="section-image">
					<img src={tinyHomeImage.src} alt="Beautiful tiny home on wheels with traditional house styling and natural materials" />
				</figure>
				<div class="text-content">
					<h2>Why use "tiny homes"?</h2>
					<p class="section-tagline">Halving the cost of building.</p>
					<p>
						Tiny homes are built on trailer beds, but unlike the trailer you'd see in a mobile home park, 
						they are built in the style of a traditional house.
					</p>
					<p>
						Tiny homes are dramatically less expensive to construct than traditional construction. The average 
						cost to build a new home in Nevada County is over $600 per square foot; a Sol Village home costs 
						less than half that while using higher quality materials.
					</p>
					<p>
						Thanks to recent reforms in Nevada County code pioneered by Sol Village founder Travis Duckworth, 
						tiny homes can now be used as permanent residences. All levels of local government are interested 
						in how tiny homes can help solve our housing affordability crisis.
					</p>
				</div>
			</div>
		</section>

		<section class="homes-section">
			<div class="section-content">
				<div class="text-content">
					<h2>About the Homes</h2>
					<p class="section-tagline">Beautiful homes made from local sustainable materials.</p>
					<p>If you've seen tiny homes before, it's likely that you're imagining a small, shed-like structure with a ladder to a sleeping loft. Sol Village destroys that norm.</p>
					<p>
						After years of experience making tiny homes, Sol Village has found that building larger units (~400 sq ft) 
						without lofts actually creates a much more "livable", open feel. Coupled with our dedication to 
						high-quality, local and sustainable materials, Sol Village houses feel like premium-grade homes with lots of 
						light and attractive architectural details.
					</p>
					<div class="highlight-box">
						<h3>Our Design Philosophy</h3>
						<ul>
							<li><strong>Beautiful:</strong> Thoughtful architecture and natural materials</li>
							<li><strong>Locally-made:</strong> Supporting Nevada County craftspeople and businesses</li>
							<li><strong>Sustainable:</strong> Low-carbon footprint, healthy materials, energy efficient</li>
						</ul>
					</div>
				</div>
				<figure class="section-image">
					<img src={interiorsImage.src} alt="Bright, spacious interior of a tiny home with high-quality finishes and natural light" />
				</figure>
			</div>
		</section>

		<section class="timeline-section">
			<h2>Development Timeline</h2>
			
			<div class="gantt-chart">
				<div class="gantt-header">
					<div class="timeline-grid">
						<div class="timeline-cell">
							<div class="timeline-year-marker">2025</div>
							<div class="timeline-line"></div>
						</div>
						<div class="timeline-cell">
							<div class="timeline-year-marker">2026</div>
							<div class="timeline-line"></div>
						</div>
						<div class="timeline-cell">
							<div class="timeline-year-marker">2027</div>
							<div class="timeline-line"></div>
						</div>
						<div class="timeline-cell">
							<div class="timeline-year-marker">2028</div>
							<div class="timeline-line"></div>
						</div>
						<div class="timeline-cell">
							<div class="timeline-year-marker">2029</div>
							<div class="timeline-line"></div>
						</div>
						<div class="timeline-cell">
							<div class="timeline-year-marker">2030</div>
							<div class="timeline-line"></div>
						</div>
					</div>
				</div>
				
				<div class="gantt-body">
					<div class="gantt-row">
						<div class="gantt-bar-container">
							<div class="gantt-bar phase-1" data-phase="1" data-start="2025.5" data-duration="1.5">
								<div class="gantt-bar-fill"><div class="gantt-bar-label">Property Acquisition</div></div>
							</div>
						</div>
					</div>
					
					<div class="gantt-row">
						<div class="gantt-bar-container">
							<div class="gantt-bar phase-2" data-phase="2" data-start="2026" data-duration="1.5">
								<div class="gantt-bar-fill"><div class="gantt-bar-label">Planning</div></div>
							</div>
						</div>
					</div>
					
					<div class="gantt-row">
						<div class="gantt-bar-container">
							<div class="gantt-bar phase-3" data-phase="3" data-start="2027" data-duration="3">
								<div class="gantt-bar-fill"><div class="gantt-bar-label">Construction</div></div>
							</div>
						</div>
					</div>
					
					<div class="gantt-row">
						<div class="gantt-bar-container">
							<div class="gantt-bar phase-4" data-phase="4" data-start="2028" data-duration="1.5">
								<div class="gantt-bar-fill"><div class="gantt-bar-label">Move-in</div></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section class="callout">
			<h2>Join our founding community</h2>
			<p>
				We're actively gathering future residents, investors, and partners who share our vision of 
				affordable, community-centered living in Nevada County. Your participation now will help shape 
				the future of housing in our region.
			</p>
			<a class="cta-primary" href="/join">Join the interest list</a>
		</section>
	</main>
</Layout>

<style>
	.page {
		min-height: 100vh;
		display: flex;
		flex-direction: column;
		gap: 120px;
		padding: 160px clamp(24px, 5vw, 120px) 96px;
		box-sizing: border-box;
	}


	.cohousing-section,
	.tiny-homes-section,
	.homes-section {
		margin: 0;
	}

	.section-content {
		display: grid;
		gap: 48px;
		align-items: grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
	}

	.tiny-homes-section .section-content {
		grid-template-columns: 1fr 1fr;
		grid-gap: 48px;
	}

	.cohousing-section .section-content,
	.homes-section .section-content {
		grid-template-columns: 1fr 1fr;
		grid-gap: 48px;
	}

	.text-content h2 {
		margin: 0 0 12px;
		font-family: 'Playfair Display', Georgia, serif;
		font-size: clamp(28px, 4vw, 40px);
		color: #3a5a40;
	}

	.section-tagline {
		margin: 0 0 24px;
		font-size: 18px;
		font-weight: 600;
		color: #2c4531;
		font-style: italic;
	}

	.text-content p {
		margin: 0 0 20px;
		line-height: 1.7;
		color: #495443;
		font-size: 16px;
	}

	.text-content a {
		color: #3a5a40;
		text-decoration: underline;
		font-weight: 500;
	}

	.text-content a:hover {
		color: #2c4531;
	}

	.section-image {
		position: relative;
		margin: 0;
		order: 1;
	}

	.tiny-homes-section .section-image {
		order: -1;
	}

	.section-image img {
		width: 100%;
		display: block;
		border-radius: 20px;
		box-shadow: 0 16px 32px rgba(20, 34, 26, 0.25);
		object-fit: cover;
		aspect-ratio: 4 / 3;
	}

	.highlight-box {
		margin-top: 24px;
		padding: 24px;
		background: rgba(255, 255, 255, 0.8);
		border-radius: 16px;
		box-shadow: 0 8px 16px rgba(31, 42, 28, 0.08);
		border-left: 4px solid #3a5a40;
	}

	.highlight-box h3 {
		margin: 0 0 16px;
		color: #3a5a40;
		font-size: 20px;
	}

	.highlight-box ul {
		margin: 0;
		padding-left: 0;
		list-style: none;
	}

	.highlight-box li {
		margin: 0 0 8px;
		color: #495443;
		line-height: 1.6;
	}

	.timeline-section {
		text-align: center;
		width: 100%;
		max-width: 1200px;
		margin: 0 auto;
	}

	.timeline-section h2 {
		margin: 0 0 16px;
		font-family: 'Playfair Display', Georgia, serif;
		font-size: clamp(32px, 4vw, 48px);
		color: #3a5a40;
	}

	.section-intro {
		margin: 0 0 48px;
		font-size: 18px;
		color: #495443;
		line-height: 1.7;
	}

	.gantt-chart {
		background: rgba(255, 255, 255, 0.95);
		border-radius: 20px;
		box-shadow: 0 16px 32px rgba(31, 42, 28, 0.12);
		overflow: hidden;
		text-align: left;
		width: 100%;
		max-width: none;
	}

	.gantt-header {
		background: linear-gradient(135deg, #3a5a40, #a3b18a);
		color: white;
		padding: 24px;
		text-align: center;
	}

	.timeline-grid {
		display: grid;
		grid-template-columns: repeat(6, 1fr);
		gap: 0;
		position: relative;
	}

	.timeline-cell {
		position: relative;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.timeline-year-marker {
		font-size: 14px;
		font-weight: 500;
		opacity: 0.9;
		margin-bottom: 8px;
	}

	.timeline-line {
		position: absolute;
		top: 100%;
		left: 50%;
		transform: translateX(-50%);
		width: 1px;
		height: 500px;
		background: rgba(58, 90, 64, 0.2);
		z-index: 1;
	}

	.gantt-body {
		padding: 24px;
		position: relative;
	}

	.gantt-row {
		display: grid;
		grid-template-columns: 1fr;
		gap: 16px;
		margin-bottom: 32px;
		position: relative;
	}

	.gantt-row:last-child {
		margin-bottom: 0;
	}

	.gantt-phase-label {
		text-align: left;
		margin-bottom: 8px;
	}

	.gantt-phase-label h3 {
		margin: 0;
		font-size: 18px;
		color: #3a5a40;
		font-weight: 600;
	}

	.gantt-bar-container {
		position: relative;
		height: 60px;
		z-index: 2;
	}

	.gantt-bar {
		position: absolute;
		top: 8px;
		bottom: 8px;
		border-radius: 8px;
		cursor: pointer;
		transition: all 0.3s ease;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
		outline: none;
		border: none;
		background: none;
	}
	
	.gantt-bar:focus {
		outline: none;
		box-shadow: none;
	}
	
	.gantt-bar:active {
		outline: none;
		box-shadow: none;
		background: none;
	}

	.gantt-bar-fill {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		border-radius: 8px;
		transition: all 0.3s ease;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.gantt-bar-label {
		color: white;
		font-weight: 600;
		font-size: 12px;
		text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
		text-align: center;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		padding: 0 8px;
	}

	.phase-1 .gantt-bar-fill {
		background: linear-gradient(135deg, #3a5a40, #4a6b4a);
		left: 10%;
		width: 30%;
	}

	.phase-2 .gantt-bar-fill {
		background: linear-gradient(135deg, #5a7a5a, #6a8a6a);
		left: 30%;
		width: 30%;
	}

	.phase-3 .gantt-bar-fill {
		background: linear-gradient(135deg, #7a9a7a, #8aaa8a);
		left: 50%;
		width: 30%;
	}

	.phase-4 .gantt-bar-fill {
		background: linear-gradient(135deg, #9aba9a, #aaca9a);
		left: 70%;
		width: 30%;
	}


	.callout {
		text-align: center;
		padding: 56px clamp(24px, 8vw, 120px);
		border-radius: 32px;
		background: linear-gradient(135deg, rgba(58, 90, 64, 0.92), rgba(163, 177, 138, 0.92));
		color: #fffef6;
		box-shadow: 0 24px 48px rgba(34, 52, 32, 0.45);
	}

	.callout h2 {
		margin: 0 0 16px;
		font-family: 'Playfair Display', Georgia, serif;
		font-size: clamp(30px, 5vw, 44px);
	}

	.callout p {
		margin: 0 0 32px;
		font-size: 18px;
		line-height: 1.7;
		max-width: 720px;
		margin-inline: auto;
	}

	.cta-primary {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 16px 32px;
		border-radius: 999px;
		font-weight: 600;
		font-size: 18px;
		text-decoration: none;
		transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
		background: #fffef6;
		color: #2f3e2d;
		box-shadow: none;
	}

	.cta-primary:hover {
		transform: translateY(-2px);
		box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
	}

	@media (max-width: 768px) {
		.page {
			gap: 80px;
			padding-top: 128px;
		}

		.cohousing-section .section-content,
		.tiny-homes-section .section-content,
		.homes-section .section-content {
			grid-template-columns: 1fr;
			gap: 32px;
		}

		.timeline-grid {
			grid-template-columns: repeat(3, 1fr);
		}

		.timeline-year-marker {
			font-size: 12px;
		}

		.gantt-row {
			grid-template-columns: 1fr;
			gap: 16px;
			margin-bottom: 24px;
		}

		.gantt-phase-label {
			text-align: center;
		}

		.gantt-bar-container {
			height: 50px;
		}

		.gantt-bar-label {
			font-size: 12px;
		}

		.callout {
			padding-inline: 24px;
		}
	}

	@media (max-width: 640px) {
		.timeline-grid {
			grid-template-columns: repeat(2, 1fr);
		}

		.timeline-cell:nth-child(2),
		.timeline-cell:nth-child(3),
		.timeline-cell:nth-child(4),
		.timeline-cell:nth-child(5) {
			display: none;
		}
	}
</style>

<script>
	// Timeline Configuration - Easy to modify!
	// To adjust timelines, simply modify the values below:
	// - timelineSpan: Total years shown on the chart
	// - phases[].startDate: When each phase begins (in years, e.g., 2025.5 = mid-2025)
	// - phases[].duration: Duration of each phase in years
	const TIMELINE_CONFIG = {
		timelineSpan: 5, // Total years shown on timeline
		phases: [
			{
				name: "Purchase Land",
				startDate: 2025.5, // Mid-2025
				duration: 1, // years
				description: "Sol Village has identified several local properties and is in active negotiations. We're looking for land that offers both privacy and community connectivity."
			},
			{
				name: "Planning", 
				startDate: 2026.0, // Start of 2026
				duration: 1.5, // years
				description: "Once a property has been selected, we'll be able to make a site plan and work through permitting with local government. This phase includes community design input."
			},
			{
				name: "Construction",
				startDate: 2027.0, // Start of 2027
				duration: 3, // years  
				description: "With an approved site plan and purchased property, we can break ground on infrastructure and hardscaping while units are being constructed offsite."
			},
			{
				name: "Move-in",
				startDate: 2028.5, // Mid-2028
				duration: 1.5, // years
				description: "After infrastructure has been installed, families can begin moving into units as they are built/purchased. Because homes are built offsite, there's no construction noise for early inhabitants. Welcome home!"
			}
		]
	};

	// Gantt Chart Interactive Features
	document.addEventListener('DOMContentLoaded', function() {
		const ganttBars = document.querySelectorAll('.gantt-bar');
		let activeTooltip = null;
		
		// Function to create and show tooltip
		function showTooltip(bar) {
			const phaseIndex = parseInt(bar.dataset.phase) - 1;
			const phase = TIMELINE_CONFIG.phases[phaseIndex];
			
			// Remove any existing tooltip
			if (activeTooltip && activeTooltip.parentNode) {
				activeTooltip.parentNode.removeChild(activeTooltip);
			}
			
			// Create tooltip
			const tooltip = document.createElement('div');
			tooltip.className = 'gantt-tooltip';
			
			tooltip.innerHTML = `
				<div class="tooltip-content">
					<h4>${phase.name}</h4>
					<p>${phase.description}</p>
					<p><small>Duration: ${phase.duration} years</small></p>
				</div>
			`;
			
			// Position tooltip relative to the bar
			const rect = bar.getBoundingClientRect();
			const barFill = bar.querySelector('.gantt-bar-fill');
			const barFillRect = barFill.getBoundingClientRect();
			
			tooltip.style.position = 'fixed';
			tooltip.style.top = (barFillRect.top - 10) + 'px';
			tooltip.style.left = (barFillRect.left + barFillRect.width / 2) + 'px';
			tooltip.style.transform = 'translateX(-50%) translateY(-100%)';
			tooltip.style.zIndex = '9999';
			
			document.body.appendChild(tooltip);
			
			// Apply final styling inline
			tooltip.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';
			tooltip.style.color = '#495443';
			tooltip.style.padding = '20px 24px';
			tooltip.style.borderRadius = '16px';
			tooltip.style.fontSize = '14px';
			tooltip.style.boxShadow = '0 16px 32px rgba(31, 42, 28, 0.15)';
			tooltip.style.pointerEvents = 'none';
			tooltip.style.maxWidth = '90vw';
			tooltip.style.minWidth = '280px';
			tooltip.style.lineHeight = '1.6';
			tooltip.style.border = '1px solid rgba(58, 90, 64, 0.2)';
			tooltip.style.backdropFilter = 'blur(10px)';
			
			// Adjust positioning for mobile
			const isMobile = window.innerWidth <= 768;
			if (isMobile) {
				// Center the tooltip and make it wider on mobile
				tooltip.style.left = '50%';
				tooltip.style.transform = 'translateX(-50%) translateY(-100%)';
				tooltip.style.maxWidth = '95vw';
				tooltip.style.width = 'auto';
			}
			
			activeTooltip = tooltip;
			return tooltip;
		}
		
		// Function to hide tooltip
		function hideTooltip() {
			if (activeTooltip && activeTooltip.parentNode) {
				activeTooltip.parentNode.removeChild(activeTooltip);
				activeTooltip = null;
			}
		}
		
		// Initialize timeline based on configuration
		function initializeTimeline() {
			const timelineStart = 2025; // Base year for calculations
			
			ganttBars.forEach((bar, index) => {
				const phase = TIMELINE_CONFIG.phases[index];
				const startDate = phase.startDate;
				const duration = phase.duration;
				
				// Update data attributes
				bar.dataset.duration = duration;
				bar.dataset.start = startDate;
				
				// Calculate position and width
				const startPercent = ((startDate - timelineStart) / TIMELINE_CONFIG.timelineSpan) * 100;
				const widthPercent = (duration / TIMELINE_CONFIG.timelineSpan) * 100;
				
				// Update bar fill position and width
				const barFill = bar.querySelector('.gantt-bar-fill');
				barFill.style.left = startPercent + '%';
				barFill.style.width = widthPercent + '%';
				
				// Update label with phase name
				const barLabel = barFill.querySelector('.gantt-bar-label');
				barLabel.textContent = phase.name;
			});
		}
		
		// Initialize timeline
		initializeTimeline();
		
		// Add click handlers for interactive adjustments
		ganttBars.forEach(bar => {
			bar.addEventListener('click', function() {
				// Toggle active state
				this.classList.toggle('active');
				
				// Add visual feedback
				if (this.classList.contains('active')) {
					this.style.zIndex = '10';
				} else {
					this.style.zIndex = '1';
					this.style.boxShadow = 'none';
				}
			});
			
			// Add tooltip on hover with phase description (desktop)
			bar.addEventListener('mouseenter', function() {
				showTooltip(this);
			});
			
			// Remove tooltip on mouse leave (desktop)
			bar.addEventListener('mouseleave', function() {
				hideTooltip();
			});
			
			// Add touch handlers for mobile devices
			bar.addEventListener('touchstart', function(e) {
				e.preventDefault();
				showTooltip(this);
			});
		});
		
		// Close tooltips on scroll (mobile behavior)
		document.addEventListener('scroll', function() {
			hideTooltip();
		}, { passive: true });
		
		// Close tooltips when touching outside the gantt chart
		document.addEventListener('touchstart', function(e) {
			// Check if the touch is outside any gantt bar
			const isGanttBar = e.target.closest('.gantt-bar');
			if (!isGanttBar) {
				hideTooltip();
			}
		}, { passive: true });
		
		// Add keyboard navigation
		document.addEventListener('keydown', function(e) {
			if (e.key === 'Escape') {
				// Remove all active states and tooltips
				ganttBars.forEach(bar => {
					bar.classList.remove('active');
					bar.style.zIndex = '1';
					bar.style.boxShadow = 'none';
				});
				hideTooltip();
			}
		});
	});
</script>

<style>
	.gantt-tooltip {
		background: rgba(255, 255, 255, 0.95) !important;
		color: #495443 !important;
		padding: 20px 24px;
		border-radius: 16px;
		font-size: 14px;
		box-shadow: 0 16px 32px rgba(31, 42, 28, 0.15);
		pointer-events: none;
		max-width: 90vw;
		min-width: 280px;
		line-height: 1.6;
		border: 1px solid rgba(58, 90, 64, 0.2) !important;
		backdrop-filter: blur(10px);
	}
	
	@media (max-width: 768px) {
		.gantt-tooltip {
			max-width: 95vw !important;
			min-width: 90vw !important;
			padding: 16px 20px !important;
			font-size: 16px !important;
		}
	}
	
	.tooltip-content h4 {
		margin: 0 0 12px;
		font-size: 18px;
		font-weight: 600;
		color: #3a5a40;
		font-family: 'Playfair Display', Georgia, serif;
	}
	
	.tooltip-content p {
		margin: 0 0 8px;
		font-size: 14px;
		color: #495443;
		line-height: 1.6;
	}
	
	.tooltip-content small {
		font-size: 12px;
		color: #2c4531;
		font-weight: 500;
		font-style: italic;
	}
	
	.gantt-bar {
		width: 100%;
	}
	
	/* Removed active state styling to prevent white background on click */
</style>
